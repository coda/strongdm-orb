version: 2.1

description: Manage and audit remote access to your servers, databases, and clusters, anywhere.

display:
  source_url: https://github.com/kr-project/strongdm-orb
  home_url: https://www.strongdm.com/

commands:
  install:
    description: Install the StrongDM CLI
    parameters:
      use-sudo:
        type: boolean
        default: true
    steps:
      - run:
          name: Install StrongDM
          command: |
            wget -O sdm.zip "https://downloads.strongdm.com/builds/sdm-cli/33.57.0/linux/amd64/0B59586A52D95BDB26494490AFEA82B5BBFDF03E/sdmcli_33.57.0_linux_amd64.zip"
            unzip sdm.zip
            chmod +x sdm
            <<# parameters.use-sudo >>sudo<</ parameters.use-sudo >> mv -f sdm /usr/bin/sdm
            rm sdm.zip
